# Backend (Slim 4)

## üìå –û–ø–∏—Å–∞–Ω–∏–µ
–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π backend –Ω–∞ [Slim 4](https://www.slimframework.com/) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏.  
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ —Ä–∞–±–æ—Ç—É —Å –∫–∞–ª–µ–Ω–¥–∞—Ä—ë–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π.  

–°—Ç–µ–∫:
- PHP 8.2+
- Slim 4
- PHP-DI
- SQLite (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø—É—Ç—å –≤ `.env`)
- Composer 2.x

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- PHP >= 8.2  
- Composer >= 2.0  
- SQLite (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ –ª—é–±–∞—è –¥—Ä—É–≥–∞—è PDO-—Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è –ë–î  

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
# –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/<yourname>/backend.git
cd backend

# —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
composer install

# —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp .env.example .env
```

---

## ‚ö°Ô∏è –ó–∞–ø—É—Å–∫
```bash
composer start
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–µ—Ä –ø–æ–¥–Ω–∏–º–µ—Ç—Å—è –Ω–∞ [http://localhost:8080](http://localhost:8080).

---

## üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –í—Ö–æ–¥: `POST /api/login`  
  –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
  ```json
  {
    "email": "admin@local",
    "password": "admin123"
  }
  ```
- –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:
  ```json
  {
    "id": 1,
    "email": "admin@local",
    "role": "admin",
    "token": "..."
  }
  ```

–ö—É–∫–∏ `sid` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.  

---

## üìÖ –†–∞–±–æ—Ç–∞ —Å —Å–æ–±—ã—Ç–∏—è–º–∏
- `GET /api/events` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π  
- `GET /api/events/{id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ –ø–æ ID  
- `POST /api/events` ‚Äî —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ (**—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω**)  
- `PUT /api/events/{id}` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ (**—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω**)  
- `DELETE /api/events/{id}` ‚Äî —É–¥–∞–ª–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ (**—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω**)  
- `PUT /api/events/{id}/status` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–æ–±—ã—Ç–∏—è (**—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω**)  

–ü—Ä–∏–º–µ—Ä —Ç–µ–ª–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è:
```json
{
  "title": "–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è",
  "description": "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ",
  "date": "2025-09-30",
  "startTime": "10:00",
  "endTime": "18:00",
  "status": "draft",
  "stages": [
    {"title": "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è", "time": "10:00"},
    {"title": "–î–æ–∫–ª–∞–¥—ã", "time": "11:00"}
  ]
}
```

---

## üì¨ –ü–æ–¥–ø–∏—Å–∫–∏
- `POST /api/subscribe`  
  ```json
  {
    "email": "user@example.com"
  }
  ```

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
app/
  Controller/   # –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (Auth, Events, Subscribe)
  Repository/   # —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π (Users, Events, Stages)
  Service/      # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (Auth, Event, Subscribe)

config/
  dependencies.php
  routes.php

public/
  index.php     # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞

var/
  app.db        # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

.env            # –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [cURL](https://curl.se/) –∏–ª–∏ [Postman](https://www.postman.com/).

–ü—Ä–∏–º–µ—Ä:
```bash
curl -X POST http://localhost:8080/api/login   -H "Content-Type: application/json"   -d '{"email":"admin@local","password":"admin123"}'
```

---

## üìñ –õ–∏—Ü–µ–Ω–∑–∏—è
MIT
